# 导航相关操作

导航相关操作主要包括位置初始化、录点、录路径、跑任务、手绘点、手绘轨道、手绘路径、新建任务等操作，这些操作都需要在进入相应的菜单后首先选择需要的地图才能操作。

## 位置初始化

机器人正确定位后，才能正确执行导航任务。

1. 在APP首页，进入到【选择地图】功能界面，选择合适的地图
2. 如果机器人位置和方位与其在实际地图位置和方位不一致，需要帮助机器人重新定位
3. 点击首页 ![](/images/media/image22.png) 位置初始化图标进入【位置初始化】主界面进行初始化操作
   ![位置初始化](/images/media/image25.png)

4. 位置初始化方式：
   - **定点初始化**（推荐）：将机器人开到地图中已有录制点的位置，调整机器人位置与该录制点方向相同，点击【点初始化】按钮，然后在左侧列表选中该录制点名称，点击顶部右侧【点初始化】
   - **手动初始化**：点击顶部右侧【手动初始化】，移动并旋转地图，将机器人移动到地图中机器人现在实际位置，旋转地图到周围红色激光点与地图框架匹配，然后点击【完成】按钮

## 录点

1. 定位准确后，将机器人遥控至合适的位置和方位
2. 在APP首页，点击左下角的 ![](/images/media/image24.png) 选择【点管理】进入点管理主界面
3. 点击右上角【新建】弹出提示框，选择【录制点】，输入点名称后，并选择点类型
   ![录点](/images/media/image34.png)

4. 录点类型：
   - **充电桩**：用于给机器人充电（充电桩点必须通过录点方式录入）
   - **导航点**：正常的导航点
   - **巡检点**：正常的巡检点

5. 点击【确定】，系统会将机器人当前的位置和方位记录为点位置信息

## 手绘点

手绘点可直接在地图上可通行区域选择合适的点和点方位进行点录取，不需要遥控机器人到具体的点。

1. 在APP首页，点击左下角的 ![](/images/media/image24.png) 选择【点管理】进入点管理主界面
2. 点击新建按钮，弹出提示框，输入合适的点名称和点类型并确认
   ![手绘点](/images/media/image35.png)

3. 拖动放缩地图让图钉处于需要录点的位置，点击【确认】按键确认点位置
4. 再次拖动地图，在刚刚确认的点上会有一个箭头用于显示该点的方位，拖动地图改变箭头方向，确认方向后，再次点击【确认】，将该点保存在系统中
   ![手绘点位置和方向](/images/media/image36.png)

## 手绘轨道

在户外或者开阔场地，需要提前绘制合理的轨道，辅助导航跑点路径生成。

1. 在APP首页，点击左下角的 ![](/images/media/image24.png) 选择【手绘轨道】，进入手绘轨道主页面
2. 点击右上角【重建】，弹出提示框后，点击【确认】按钮，进入到手绘轨道界面
3. 通过地图录制点添加轨道。添加手绘轨道之前，首先需要按序在地图上添加相应的录制点
   ![手绘轨道](/images/media/image37.png)

4. 在手绘轨道界面中，点击点列表，每次选中一个导航点，就点击一次【添加点】，将所有的导航点都连接起来
5. 绘制结束后，点击【保存】将绘制轨道保存，该轨道将自动覆盖系统中原有轨道
6. 对于有直角拐角的地方，需要在拐角两端分别录制一个点，使其能够连接起来，并调整轨道的曲率
   ![轨道拐角](/images/media/image38.png)

7. 编辑手绘轨道：
   - **编辑轨道的弯曲度**：在编辑轨道界面选择具体的线段名称，滑动滑块可以调节轨道线段的弯曲度大小
   - **编辑轨道的单双性**：选择单向表示这段轨道只能从起始点到达终点；选择双向表示这段轨道的两个点既是起始点也是终点
   ![编辑轨道](/images/media/image39.png)
   - **增删部分轨道**：可以重置某一个点作为起始点，再选择一个需要连接的点添加轨道；也可以选择需要删除的一段轨道进行删除

## 录路径

1. 在APP首页，点击左下角的 ![](/images/media/image24.png) 点击【路径管理】，进入【路径管理】功能界面
2. 点击右上角【新建】，在弹框中选择【录路径】并输入路径名称，点击【确定】按钮
3. 点击【开始】，遥控机器人在地图中行走，系统自动记录并优化机器人真实走过的路径
4. 点击【保存】按键，保存路径
   ![录路径](/images/media/image40.png)

## 手绘路径

手绘路径可在不需要遥控机器人的情况下，人工在地图中选择多个点，系统将自动将选择的多个点用直线连接成一条路径。

1. 在APP首页，点击左下角的 ![](/images/media/image24.png) 点击【路径管理】，进入【路径管理】功能界面
2. 点击右上角【新建】按键，在弹框中选择【手绘路径】输入路径名称后确认，进入路径绘制界面
3. 通过界面中的图钉，拖动地图选多个点，系统将两点之间用直线连接作为路径
4. 若两点之间的连线穿过了实体墙或者实体障碍物，会提示"路径不安全"，需重新选取
5. 绘制完成后通过地图右下方的【保存】按键保存
   ![手绘路径](/images/media/image42.png)

## 创建任务

创建任务用于执行多个跑点连续运行或者多个路径连续运行，或者多次自动运行某些跑点或者路径任务。

1. 在APP首页，点击左下角的 ![](/images/media/image43.png) 进入到【组合任务】功能界面
2. 点击右上角【新建】，输入任务名称，进入到新建任务界面
3. 点击顶部下拉框，会在左侧列表显示出之前创建的所有点、路径、区域和停车位，勾选需要添加的项目
   ![创建任务](/images/media/image44.png)

4. 点击列表右侧 ![](/images/media/image45.png) 会弹出弹窗，其中可以添加设置机器人执行任务时的动作
   ![添加动作](/images/media/image46.png)

5. 设置动作及参数后，点击【添加动作】，所选动作和参数就会显示在下方列表中
6. 点击【确定】按钮，点/路径/区域/停车位以及相应的动作就添加完成
7. 点击【添加】可以继续添加项目，添加完成后，点击右上角【保存】按钮，一个任务就创建成功了

## 跑任务

### 跑组合任务

1. 在APP首页，点击【开始任务】，进入组合任务界面
2. 点击任务右上角【查看】，可查看该任务中选择的点和路径
   ![组合任务](/images/media/image47.png)

3. 在任务详情界面可以点击【删除】删除该任务
   ![任务详情](/images/media/image48.png)

4. 在组合任务界面中，可以设置循环执行选项：
   - 点击"无限循环"滑动框，颜色变为绿色时，为无限循环状态
   - 或者点击滑动框旁边的加号按键，可执行任务任意次数（默认为1次，最大为50次）

5. 点击【开始任务！】，机器人将按照创建的组合任务依次完成既定的任务
6. 任务执行过程中，可通过【结束】【暂停】【继续】按钮进行控制
   ![任务控制](/images/media/image49.png)

### 跑临时任务

1. 在APP首页，点击【开始任务】，进入组合任务界面
2. 点击【临时任务】，在临时任务界面中，通过顶部下拉框选择不同类型的任务（点、路径、区域）
   ![临时任务](/images/media/image50.png)

3. 跑路径：
   - 在左侧列表选中具体的路径名称
   - 点击右上方的【开始】按键
   - 机器人将自动规划路径运动到路径起点，然后沿着选择的路径行走到路径终点

4. 跑点：
   - 选中具体的点名称
   - 点击右上方的【开始】按键
   - 机器人将自动从当前位置运动到选择点

5. 临时任务执行过程中可通过【暂停】、【继续】、【结束】按键进行控制

## 定时任务

### 创建定时任务

1. 在APP首页，点击左下角的 ![](/images/media/image24.png) 点击【定时任务】，进入【定时任务】功能界面
   ![定时任务](/images/media/image51.png)

2. 点击右上角【新建】，进入【新增定时任务】功能界面，根据需要填写表单
   ![新增定时任务](/images/media/image52.png)

3. 选项说明：
   - **是否循环**：每周重复在指定的时间实行任务
   - **打断任务**：执行定时任务时，可自动停止正在手动执行的任务，直接进行定时任务

4. 点击【确定】保存定时任务

### 删除定时任务

在【定时任务】功能界面，点击列表右侧【删除】按钮即可删除一条定时任务。

## 任务报告

1. 在APP首页，点击左下角的 ![](/images/media/image24.png) 点击【任务报告】，进入【任务报告】功能界面
   ![任务报告](/images/media/image53.png)

2. 点击表格行，可查看任务报告详情
   ![任务报告详情](/images/media/image54.png) 