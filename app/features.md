# SeaRobot APP 2.0.0 功能指南

## 重要注意事项

请查看[重要使用须知](./important_notices.md)，了解产品使用前的注意事项和安全警告。

## 连接机器人
### 内网连接方式
- **默认配置连接**
  - 连接机器人WIFI（密码：12345678）
  - 打开机器人操作平台APP
  - 登录界面选择"本地连接"选项
  
- **自定义配置连接**
  - 连接机器人WIFI
  - 点击【机器人配置】进入设备配置界面
  - 点击【添加】输入机器人名称、IP、端口
  - 填写用户名（admin）和密码（123456）登录

> 若连接WIFI后APP无法连接登录控制器，可尝试修改WIFI连接方式为静态连接。将IP地址设置为192.168.1.210，子网掩码为255.255.255.0，路由器设置为192.168.1.1，DNS设置为8.8.8.8。

## 地图相关操作
### 建图
1. 通过遥控手柄将机器人开到适当位置
2. 点击地图图标按钮，进入【选择地图】功能界面
3. 点击右上角【建图】，进入【创建地图】功能界面
4. 点击【开始建图】，进入建图初始化界面
5. 通过遥控器控制机器人行走，自动生成环境地图
6. 点击停止按钮，再点击【保存】按钮输入地图名字
7. 建图完成后自动跳转到【选择地图】功能界面

> 地图中颜色说明：深蓝色表示障碍物，浅蓝色表示未扫描区域，白色表示无障碍，灰色线条表示路沿（仅3D激光建图）

### 建图录点
- 在建图过程中可录制导航点
- 在需要录点的位置停下机器人，点击【录初始点】
- 输入点名称后确定即可录制成功
- 此功能仅适用于3D激光，录制的点可用于绘制轨道

### 继续建图
- 目前仅限于2D环境（功能暂未开放）
- 可在原始地图基础上继续建图
- 需要先将机器人移动到继续建图的初始位置

### 建图规则及建议
1. 建图必须走一个完整的回环
2. 分叉路多和环路多的环境，先闭小环后闭大环
3. 建图起始点尽量不要旋转
4. 结束点选择在之前走过的路径上，且尽量不旋转
5. 操作人员尽量站在机器人后方
6. 其它人员建图时尽量不要站在机器人前方
7. 转弯处尽量慢点旋转，能直线行走尽量选择直线
8. 3D建图需在系统更新中修改建图环境参数（0-室内/1-室外）

### 编辑虚拟墙
编辑虚拟墙功能用于对地图功能区进行管理，包括六种类型：

- **虚拟墙**：设置机器人无法通过的区域
- **坡道**：机器人导航到该区域前会减速
- **十字路口**：机器人行驶到该区域会对红绿灯进行检测
- **减速区**：机器人导航到该区域时进行减速
- **不避障区**：机器人导航到该区域遇障碍物会停止但不绕行
- **避障区**：机器人导航到该区域时会将其视为障碍物绕行

#### 操作步骤
1. 进入【编辑地图】功能界面选择【编辑虚拟墙】
2. 选择虚拟墙类型（直线/多边形/矩形/圆形）
3. 根据选定类型确定虚拟墙位置和范围
4. 点击【完成】保存虚拟墙
5. 如需删除，点击选中虚拟墙后点击右上角删除按钮

### 编辑障碍物
用于清除地图噪点或手动添加障碍物

#### 操作步骤
1. 进入【编辑障碍物】主界面
2. 选择添加障碍物/清除障碍物/添加未知区域
3. 标记需要操作的区域点
4. 点击【完成】并【保存】应用更改

## 导航相关操作

### 位置初始化
- 确保机器人在地图中正确定位
- 若位置不匹配，进入【位置初始化】主界面
- 支持三种初始化方式：
  - **定点初始化**：将机器人开到已有录制点位置
  - **手动初始化**：移动并旋转地图匹配机器人实际位置

### 录点
1. 将机器人遥控至合适的位置和方位
2. 进入【点管理】界面，点击【新建】选择【录制点】
3. 输入点名称并选择点类型（充电桩/导航点/巡检点）
4. 点击【确定】记录位置信息

### 手绘点
1. 进入【点管理】界面，点击【新建】选择【手绘点】
2. 输入点名称并选择点类型
3. 拖动地图到需要录点的位置点击【确认】
4. 调整箭头方向确定方位后再次点击【确认】

### 手绘轨道
用于在开阔场地规划机器人行驶轨道，使机器人行驶更合理

#### 操作步骤
1. 进入【手绘轨道】主页面
2. 点击【重建】进入手绘轨道界面
3. 选择录制点连接成轨道
4. 编辑轨道弯曲度、单双向设置
5. 点击【保存】应用更改

### 录路径
1. 进入【路径管理】界面，点击【新建】选择【录路径】
2. 输入路径名称后点击【开始】
3. 遥控机器人行走，系统自动记录路径
4. 点击【保存】保存路径

### 手绘路径
1. 进入【路径管理】界面，点击【新建】选择【手绘路径】
2. 输入路径名称后在地图上选择多个点连接成路径
3. 点击【保存】保存路径

### 创建任务
1. 进入【组合任务】界面，点击【新建】
2. 输入任务名称，从列表中选择点/路径/区域/停车位
3. 设置相应的动作和参数
4. 点击【保存】创建任务

### 跑任务
- **跑组合任务**：执行预先创建的多点/路径组合任务
- **跑路径**：让机器人沿选定路线行走
- **跑点**：让机器人行走到指定点位

#### 操作控制
- 支持无限循环或设定循环次数（最多50次）
- 执行过程中可暂停/继续/结束任务

### 定时任务
1. 进入【定时任务】界面，点击【新建】
2. 设置执行时间、选择任务、循环设置等
3. 点击【确定】创建定时任务

### 任务报告
- 查看已执行任务的详细报告
- 进入【任务报告】功能界面查看列表和详情

## 系统相关

### 参数配置
- 在线设置机器人参数
- 进入【导航配置】功能界面修改参数
- 支持参数重置、设置有效与上下限制

### 录包管理
- 查看已录制完成的包名信息
- 删除废弃的包

### 系统信息
- 查看APP版本、固件版本
- 进行固件升级、Log包下载
- 同步时间、查看系统状态
- 恢复出厂设置

## 状态显示与控制

### 控制机器人移动
- 使用遥控窗口控制机器人前后左右移动
- 支持箭头式和摇杆式两种遥控类型
- 可调整遥控速度（高速1.2m/s，低速0.6m/s）

### 机器人信息显示
- 显示机器人名称、速度、旋转角度
- 实时显示网络信号
- 查看底盘状态

### 底盘状态
- 显示GPS、红外线状态和距离
- 显示超声波状态和距离
- 显示电压信息

### 录包
- 支持导航模式和建图/定位两种录包类型
- 录制包便于工作人员分析问题

### 云台控制
- 控制云台上下左右转动
- 支持云台复位

### 外接设备控制
- 控制喇叭、灯光、警灯等设备

### 音频收藏
- 查看和播放已上传的音频
- 支持上传新音频（.wav格式）

## 操作流程
1. 连接机器人WiFi
2. 配置登录信息并进入APP
3. 创建地图或选择现有地图
4. 添加虚拟墙和编辑地图
5. 位置初始化确保定位准确
6. 根据需要执行导航任务：
   - 录点并创建巡航点任务
   - 绘制轨道辅助导航
   - 录制路径并执行路径任务

## 常见故障分析

| 问题现象 | 可能原因 | 对策 |
|---------|---------|------|
| 建图存在重影或与实际不符 | 激光/控制器放置位置角度不正确 | 调整激光水平位置和角度 |
| | 建图路径没有回环 | 按照建图规则重新建图 |
| 固件升级失败 | 网络不稳定 | 重启后重新升级 |
| 行驶中突然停止 | 机器人供电不足 | 及时充电 |
| | 电机掉线 | 检查电机线路和状态 |
| | 激光掉线 | 检查并牢固安装激光线路 |
| 行驶中卡顿倒退 | 激光前有障碍物 | 检查并清除障碍物 |
| | 超声波干扰 | 调整超声波测距参数 |
| 行驶中左右摆动较大 | 激光放置方位有偏移 | 重新正确安装激光 |
| | 环境变化较大与地图不符 | 考虑新建地图 | 