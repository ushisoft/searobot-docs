import{_ as i,c as a,o as t,ae as h}from"./chunks/framework.D7Xxp1-g.js";const F=JSON.parse('{"title":"ROS 通讯包使用说明","description":"","frontmatter":{},"headers":[],"relativePath":"gt01/ros.md","filePath":"gt01/ros.md"}'),e={name:"gt01/ros.md"};function n(p,s,l,k,d,o){return t(),a("div",null,s[0]||(s[0]=[h(`<h1 id="ros-通讯包使用说明" tabindex="-1">ROS 通讯包使用说明 <a class="header-anchor" href="#ros-通讯包使用说明" aria-label="Permalink to &quot;ROS 通讯包使用说明&quot;">​</a></h1><h2 id="_5-1-can-分析仪权限设置" tabindex="-1">5.1 CAN 分析仪权限设置 <a class="header-anchor" href="#_5-1-can-分析仪权限设置" aria-label="Permalink to &quot;5.1 CAN 分析仪权限设置&quot;">​</a></h2><p>首次使用CAN 分析仪时需要设置先设置权限</p><h3 id="方法一-创建-udev-规则" tabindex="-1">方法一：创建 udev 规则 <a class="header-anchor" href="#方法一-创建-udev-规则" aria-label="Permalink to &quot;方法一：创建 udev 规则&quot;">​</a></h3><p>在终端中输入命令：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bash</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;echo &#39;ACTION==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">add</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">, SUBSYSTEMS==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">usb</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">, ATTRS{idVendor}==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">04d8</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">, ATTRS{idProduct}==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">0053</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">, GROUP=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">users</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">, MODE=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">0777</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39; &gt;&gt; /etc/udev/rules.d/99-usbcan.rules&quot;</span></span></code></pre></div><p>输入命令后，重新插拔CAN 分析仪的USB 数据线后生效，重启系统后仍有效。</p><h3 id="方法二-手动设置设备权限" tabindex="-1">方法二：手动设置设备权限 <a class="header-anchor" href="#方法二-手动设置设备权限" aria-label="Permalink to &quot;方法二：手动设置设备权限&quot;">​</a></h3><ol><li>输入命令</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lsusb</span></span></code></pre></div><ol start="2"><li>记录下设备名称Microchip Technology, Inc.所对应的【Bus】和【Device】的值。</li></ol><p>例：Bus 001 Device 006:ID 04d8:0053 Microchip Technology, Inc.</p><p>Bus 为001，Device 为006</p><ol start="3"><li>输入命令</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> chmod</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 777</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/bus/usb/【Bus</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> id】/【Device</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> id】</span></span></code></pre></div><p>把上方命令中的【Bus id】和【Device id】替换为步骤2中获得的值，手动赋予对应设备权限，</p><p>例：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> chmod</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 777</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/bus/usb/001/006</span></span></code></pre></div><h2 id="_5-2-ros-通讯包编译与使用" tabindex="-1">5.2 ROS 通讯包编译与使用 <a class="header-anchor" href="#_5-2-ros-通讯包编译与使用" aria-label="Permalink to &quot;5.2 ROS 通讯包编译与使用&quot;">​</a></h2><h3 id="_5-2-1-创建并初始化工作空间" tabindex="-1">5.2.1 创建并初始化工作空间 <a class="header-anchor" href="#_5-2-1-创建并初始化工作空间" aria-label="Permalink to &quot;5.2.1 创建并初始化工作空间&quot;">​</a></h3><p>分别在终端中输入以下命令</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> catkin_ws</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> catkin_ws/src</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> catkin_ws/src</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">catkin_init_workspace</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ..</span></span></code></pre></div><h3 id="_5-2-2-编译" tabindex="-1">5.2.2 编译 <a class="header-anchor" href="#_5-2-2-编译" aria-label="Permalink to &quot;5.2.2 编译&quot;">​</a></h3><p>把ROS 包复制到上面步骤创建的src 文件夹中</p><p>输入命令：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">catkin_make</span></span></code></pre></div><p>等待编译完成后初始化环境变量，输入命令：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./devel/setup.bash</span></span></code></pre></div><h3 id="_5-2-3-启动" tabindex="-1">5.2.3 启动 <a class="header-anchor" href="#_5-2-3-启动" aria-label="Permalink to &quot;5.2.3 启动&quot;">​</a></h3><p>输入命令：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">roslaunch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mt_control_can</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mt_control_can.launch</span></span></code></pre></div><h3 id="_5-2-4-查看节点发布的底盘信息" tabindex="-1">5.2.4 查看节点发布的底盘信息 <a class="header-anchor" href="#_5-2-4-查看节点发布的底盘信息" aria-label="Permalink to &quot;5.2.4 查看节点发布的底盘信息&quot;">​</a></h3><p>查看速度反馈</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rostopic</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /mt/velocity_info</span></span></code></pre></div><p>查看轮速反馈</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rostopic</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /mt/speed_info</span></span></code></pre></div><p>查看电流反馈</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rostopic</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /mt/current_info</span></span></code></pre></div><p>查看原始数据</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rostopic</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /mt/buff_info</span></span></code></pre></div><p>详细内容参考ROS 包内的说明文件</p><h3 id="_5-2-5-发布话题控制底盘" tabindex="-1">5.2.5 发布话题控制底盘 <a class="header-anchor" href="#_5-2-5-发布话题控制底盘" aria-label="Permalink to &quot;5.2.5 发布话题控制底盘&quot;">​</a></h3><p>速度、角度指令示例：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rostopic</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pub</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -r</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /mt/velocity_ctrl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> geometry_msgs/Twist</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;linear:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  x: 1.0</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  y: 0.0</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  z: 0.0</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">angular:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  x: 0.0</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  y: 0.0</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  z: 0.349&quot;</span></span></code></pre></div><p>打开急停</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rostopic</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pub</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /mt/stop_ctrl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> std_msgs/UInt8</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;data: 1&quot;</span></span></code></pre></div><p>关闭急停</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rostopic</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pub</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /mt/stop_ctrl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> std_msgs/UInt8</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;data: 0&quot;</span></span></code></pre></div><p>清除碰撞状态</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rostopic</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pub</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /mt/collision_clear</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> std_msgs/UInt8</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;data: 1&quot;</span></span></code></pre></div><p>尝试清除错误状态</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rostopic</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pub</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /mt/try_clear_error</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> std_msgs/UInt8</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;data: 1&quot;</span></span></code></pre></div>`,52)]))}const c=i(e,[["render",n]]);export{F as __pageData,c as default};
